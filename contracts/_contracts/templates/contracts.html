{% extends 'home.html' %}

{% block title %} Contracts App {% endblock%}

{%block content%}
<div>
  <h1>Contracts</h1>
  <br>
  <div>
    <form class="row g-3" method="POST">
    {%csrf_token%}
      <div class="col-md-12">
        <label for="inputExternalCompany" class="form-label">External Company</label>
        <select class="form-select" id="inputExternalCompany">
          <option selected>Choose...</option>
          {%if all_contracts%}
            {%for external in all_contracts%}
            <option value="{{external.id}}">{{external.id}}</option>
            {%endfor%}
          {%endif%}
        </select>
      </div>
      <div class="col-md-12">
        <label for="inputInternalCompany" class="form-label">Internal Company</label>
        <select class="form-select" id="inputInternalCompany">
          <option selected>Choose...</option>
          {%if all_contracts%}
            {%for internal in all_contracts%}
            <option value="{{internal.id}}">{{internal.id}}</option>
            {%endfor%}
          {%endif%}
        </select>
      </div>
      <div class="col-md-3">
        <label for="inputExternalEntityCode" class="form-label">External Entity Code</label>
        <input type="text" class="form-control" id="inputExternalEntityCode" name="external_entity_code">
      </div>
      <div class="col-md-3">
        <label for="inputInternalEntityCode" class="form-label">Internal Entity Code</label>
        <input type="text" class="form-control" id="inputInternalEntityCode" name="internal_entity_code">
      </div>
      <div class="col-md-3">
        <label for="inputContractStartDate" class="form-label">Contract Start Date</label>
        <input type="text" class="form-control" id="inputContractStartDate" name="contract_start_date">
      </div>
      <div class="col-md-3">
        <label for="inputContractExtCode" class="form-label">Contract Extension Code</label>
        <input type="text" class="form-control" id="inputContractExtCode" name="contract_ext_code">
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-outline-success">Add</button>
      </div>
    </form>
    <hr width=”75%”>
  </div>
  <div>
    
    <form class="d-flex" action="{%url 'contracts'%}" method="get">
      <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" value="{{search_query}}" name="search_query">
      <button class="btn btn-outline-secondary" type="submit">Search</button>
    </form>
    <br/>
    {%if messages%}
      {%for message in messages%}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
          {{message}}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {%endfor%}
    {%endif%}
    <div class="table_container">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Contract Name</th>
            <th scope="col">External Entity</th>
            <th scope="col">Internal Entity</th>
            <th scope="col">Contract Date</th>
            <th scope="col">Contract Extension</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {%if all_contracts%}
        {%for contracts in all_contracts%}
          <tr>
            <td>{{contracts.contract_name}}</td>
            <td>{{contracts.company_name}}</td>
            <td>{{contracts.company_name}}</td>
            <td>{{contracts.contract_date}}</td>
            <td>{{contracts.contract_extension}}</td>
            <td>
              <a>
                <button type="button" class="btn btn-outline-danger">Delete</button>
              </a>
            </td>
          </tr>
        {%endfor%}
        </tbody>
      <table>
    </div>
    {%endif%}
  </div>

</div>
{%endblock%}
